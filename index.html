<html>
  <head>
<style>
    #pager {
        display: flex;
        flex-direction: row;
        justify-content: space-around;
    }
    
    #results {
        display: flex;
        flex-direction: column;
    }
    
    .record {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    
    .record img {
        height: 22em;
        width: auto;
    }
</style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
  </head>
  <body>
    <h1>Harvard Museum Modern Art Collection</h1>
    <div id='pager'></div>
    <div id='results'></div>
<script>
    const API_KEY= 'cb082110-99a8-43b9-8434-b56b43fbd4f3';
    const BASE_URL = `https://api.harvardartmuseums.org/object?apikey=${ API_KEY}&hasimage=1&period=Modern&sort=id&size=50`;
    
    function renderRecord ({title,dated,primaryimageurl,description,creditline}) {
        const headerElem = `<header class="rec-header">
                                <h3>${title} - ${dated || "n.d."}</h3>
                            </header>`;
        const imageElem = `<img src="${primaryimageurl}"/>`;
        const footerElem = ``;
        
        $('#results').append($(`
        <div class="record">
            ${headerElem}
            ${primaryimageurl ? imageElem : ''}
            ${footerElem}
        </div>
        `));
    }
    
    async function fetchData () {
        const pageNum = window.location.hash.slice(1) || 1;
        const rsp = await fetch(`${BASE_URL}&page=${pageNum}`)
        const {info, records} = await rsp.json();
        
        if (!$('#pager').html()) {
            for (let i = 1; i <= info.pages; i++) {
                $('#pager').append(`
                    <a href="#${i}">${i}</a>
                `);
            }
        }
        
        console.log(records);
        $('#results').empty();
        records.forEach(renderRecord);
    }
    
    function bootstrap () {
        fetchData();
    }
    
    window.addEventListener('hashchange', fetchData);
    
    bootstrap();
</script>
  </body>
</html>
